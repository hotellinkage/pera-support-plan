<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pera's 8-Week Aligned Support Plan</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .header-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .user-select {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255,255,255,0.2);
            padding: 10px 15px;
            border-radius: 10px;
        }

        .user-select select {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
        }

        .overall-progress {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 10px;
            min-width: 200px;
        }

        .overall-progress-text {
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .progress-bar {
            height: 10px;
            background: rgba(255,255,255,0.3);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .week-progress-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            padding: 10px;
            background: #e8f5e9;
            border-radius: 8px;
        }

        .week-progress-container .progress-bar {
            flex: 1;
            background: #c8e6c9;
        }

        .week-progress-text {
            font-weight: bold;
            color: #2e7d32;
            min-width: 50px;
        }

        .last-edited {
            font-size: 0.85em;
            color: #666;
            font-style: italic;
            margin-top: 10px;
            padding: 8px 12px;
            background: #f5f5f5;
            border-radius: 6px;
            display: inline-block;
        }

        .comment-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.1em;
            padding: 5px;
            opacity: 0.5;
            transition: all 0.2s;
        }

        .comment-btn:hover {
            opacity: 1;
            transform: scale(1.2);
        }

        .comment-btn.has-comment {
            opacity: 1;
            background: #667eea;
            color: white;
            border-radius: 50%;
            padding: 5px 8px;
        }

        .comment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .comment-modal.active {
            display: flex;
        }

        .comment-modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .comment-modal h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .comment-modal textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1em;
            min-height: 100px;
            resize: vertical;
        }

        .comment-modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: flex-end;
        }

        .comment-modal-buttons button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
        }

        .comment-save-btn {
            background: #667eea;
            color: white;
        }

        .comment-cancel-btn {
            background: #e0e0e0;
            color: #333;
        }

        /* Help Button */
        .help-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: white;
            color: #dc3545;
            border: 3px solid #dc3545;
            border-radius: 50%;
            font-size: 1.8em;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 9998;
            transition: all 0.3s ease;
        }

        .help-btn:hover {
            transform: scale(1.1);
            background: #dc3545;
            color: white;
            box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
        }

        /* Help Panel Slide-in */
        .help-panel {
            position: fixed;
            top: 0;
            right: -450px;
            width: 420px;
            max-width: 90vw;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 30px rgba(0,0,0,0.3);
            z-index: 10001;
            transition: right 0.4s ease;
            overflow-y: auto;
        }

        .help-panel.active {
            right: 0;
        }

        .help-panel-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
        }

        .help-panel-header h2 {
            margin: 0;
            font-size: 1.4em;
        }

        .help-close-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            font-size: 1.2em;
            cursor: pointer;
            transition: background 0.2s;
        }

        .help-close-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .help-panel-content {
            padding: 25px;
        }

        .help-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .help-section:last-child {
            border-bottom: none;
        }

        .help-section h3 {
            color: #667eea;
            margin-bottom: 12px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .help-section p, .help-section li {
            color: #555;
            line-height: 1.6;
            font-size: 0.95em;
        }

        .help-section ul {
            padding-left: 20px;
            margin-top: 8px;
        }

        .help-section li {
            margin-bottom: 8px;
        }

        .help-tip {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px 15px;
            border-radius: 0 8px 8px 0;
            margin-top: 10px;
        }

        .help-tip strong {
            color: #856404;
        }

        .help-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.4);
            z-index: 10000;
        }

        .help-overlay.active {
            display: block;
        }

        .info-section {
            background: #f8f9fa;
            padding: 30px 40px;
            border-bottom: 3px solid #667eea;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .info-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .info-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .info-card ul {
            list-style: none;
            padding-left: 0;
        }

        .info-card li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
        }

        .info-card li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #764ba2;
            font-weight: bold;
        }

        .content {
            padding: 40px;
        }

        .week-section {
            margin-bottom: 40px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .week-section:hover {
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
            border-color: #667eea;
        }

        .week-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .week-header h2 {
            font-size: 1.5em;
        }

        .toggle-icon {
            font-size: 1.5em;
            transition: transform 0.3s ease;
        }

        .week-section.collapsed .toggle-icon {
            transform: rotate(-90deg);
        }

        .week-content {
            padding: 30px;
            background: white;
        }

        .week-section.collapsed .week-content {
            display: none;
        }

        .focus-area {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .focus-area h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .focus-items {
            display: grid;
            gap: 10px;
        }

        .focus-item {
            padding: 10px;
            background: white;
            border-radius: 6px;
            font-size: 0.95em;
        }

        .daily-routine {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #ffc107;
        }

        .daily-routine h3 {
            color: #856404;
            margin-bottom: 15px;
        }

        .tracker-section {
            margin-top: 30px;
            padding: 25px;
            background: #e8f4f8;
            border-radius: 10px;
            border-left: 4px solid #17a2b8;
        }

        .tracker-section h3 {
            color: #117a8b;
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        .day-checks {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .day-check {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            background: white;
            border-radius: 8px;
        }

        .day-check input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .day-check label {
            cursor: pointer;
            font-weight: 500;
        }

        .progress-checks {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }

        .progress-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
        }

        .progress-item label {
            flex: 1;
            font-weight: 500;
        }

        .status-buttons {
            display: flex;
            gap: 10px;
        }

        .status-btn {
            padding: 8px 16px;
            border: 2px solid #dee2e6;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9em;
        }

        .status-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .status-btn.active {
            border-color: currentColor;
            font-weight: bold;
        }

        .status-btn.mastered {
            color: #28a745;
        }

        .status-btn.mastered.active {
            background: #28a745;
            color: white;
        }

        .status-btn.developing {
            color: #ffc107;
        }

        .status-btn.developing.active {
            background: #ffc107;
            color: white;
        }

        .status-btn.needs-support {
            color: #dc3545;
        }

        .status-btn.needs-support.active {
            background: #dc3545;
            color: white;
        }

        .notes-area {
            margin-top: 20px;
        }

        .notes-area label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #117a8b;
        }

        .notes-area textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.95em;
            resize: vertical;
            min-height: 80px;
        }

        .notes-area textarea:focus {
            outline: none;
            border-color: #17a2b8;
        }

        .save-btn {
            margin-top: 15px;
            padding: 12px 30px;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(40, 167, 69, 0.3);
        }

        .export-section {
            margin-top: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            text-align: center;
        }

        .export-btn {
            padding: 15px 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 0 10px;
        }

        .export-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.4);
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
            }
            
            .export-section {
                display: none;
            }
            
            .week-section {
                page-break-inside: avoid;
            }
            
            .week-content {
                display: block !important;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }
            
            .status-buttons {
                flex-direction: column;
            }
            
            .status-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Help Button -->
    <button class="help-btn" onclick="toggleHelp()" title="Help">‚ùì</button>

    <!-- Help Panel Overlay -->
    <div class="help-overlay" id="helpOverlay" onclick="toggleHelp()"></div>

    <!-- Help Panel -->
    <div class="help-panel" id="helpPanel">
        <div class="help-panel-header">
            <h2>üìñ How to Use This System</h2>
            <button class="help-close-btn" onclick="toggleHelp()">‚úï</button>
        </div>
        <div class="help-panel-content">
            <div class="help-section">
                <h3>üëã Welcome!</h3>
                <p>This is a shared progress tracker for Pera's 8-week support plan. Everyone on the team (parents, tutor, and teacher) can see and update progress in real-time.</p>
            </div>

            <div class="help-section">
                <h3>1Ô∏è‚É£ First Step: Select Your Name</h3>
                <p>Before making any changes, select your name from the dropdown at the top. This helps everyone see who made the last update.</p>
                <div class="help-tip">
                    <strong>Important:</strong> You cannot save anything without selecting your name first!
                </div>
            </div>

            <div class="help-section">
                <h3>2Ô∏è‚É£ Daily Home Routine</h3>
                <p>Parents: Check off each day when the home routine is completed:</p>
                <ul>
                    <li><strong>Phonics (8-10 min):</strong> Sound review ‚Üí Blending ‚Üí Dictation</li>
                    <li><strong>Reading with Raz-Plus (10-12 min):</strong> Listen ‚Üí Read twice ‚Üí Answer questions</li>
                    <li><strong>Math with Reflex Math (7-10 min):</strong> Practice + strategy support</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>üí¨ Adding Comments</h3>
                <p>Click the üí¨ icon next to any day to add a note. For example:</p>
                <ul>
                    <li>"Had a great session today!"</li>
                    <li>"Struggled with blending, needs more practice"</li>
                    <li>"Finished Raz level B book"</li>
                </ul>
                <p>When a day has a comment, the icon changes to üìù with a purple background.</p>
            </div>

            <div class="help-section">
                <h3>üìä Progress Tracking</h3>
                <ul>
                    <li><strong>Checkboxes:</strong> Mark days as completed</li>
                    <li><strong>Progress bars:</strong> Show completion percentage</li>
                    <li><strong>Friday Progress Check:</strong> Rate ELA and Math as Mastered, Developing, or Needs Support</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>üë• Who Does What?</h3>
                <ul>
                    <li><strong>Mrs. Frixione (School):</strong> Primary classroom instruction</li>
                    <li><strong>Ms. Boothby (Tutor):</strong> 2x/week explicit teaching sessions</li>
                    <li><strong>Erhan & Meral (Home):</strong> Daily 25-35 min practice routine</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>üîÑ Real-Time Sync</h3>
                <p>All changes are saved automatically and synced across all devices. When someone makes a change, you'll see "Last edited by [name]" at the bottom of each week.</p>
            </div>

            <div class="help-section">
                <h3>üí° Tips for Success</h3>
                <ul>
                    <li>Keep sessions short (25-35 min) - stop while she still feels successful!</li>
                    <li>Be consistent - daily practice is better than long sessions</li>
                    <li>Use comments to communicate with the team</li>
                    <li>Check progress bars to celebrate achievements</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>üåü Pera's 8-Week Aligned Support Plan üåü</h1>
            <p>Waters Edge Elementary School - Grade 1</p>
            <p style="font-size: 0.9em; margin-top: 10px;">School + Ms. Boothby + Home Support</p>

            <div class="header-controls">
                <div class="user-select">
                    <span>üë§</span>
                    <select id="currentUser" onchange="saveCurrentUser()">
                        <option value="">Select your name</option>
                        <option value="Erhan">Erhan</option>
                        <option value="Meral">Meral</option>
                        <option value="Ms. Boothby">Ms. Boothby</option>
                        <option value="Mrs. Frixione">Mrs. Frixione</option>
                    </select>
                </div>
                <div class="overall-progress">
                    <div class="overall-progress-text">üìä Overall Progress: <span id="overallPercent">0%</span></div>
                    <div class="progress-bar">
                        <div class="progress-bar-fill" id="overallProgressBar" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comment Modal -->
        <div class="comment-modal" id="commentModal">
            <div class="comment-modal-content">
                <h3>üí¨ Add Comment for <span id="commentDayLabel"></span></h3>
                <textarea id="commentText" placeholder="Write your comment about today's work..."></textarea>
                <div class="comment-modal-buttons">
                    <button class="comment-cancel-btn" onclick="closeCommentModal()">Cancel</button>
                    <button class="comment-save-btn" onclick="saveComment()">Save Comment</button>
                </div>
            </div>
        </div>

        <div class="info-section">
            <h2 style="color: #667eea; margin-bottom: 20px;">Program Overview</h2>
            
            <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                <h3 style="color: #764ba2; margin-bottom: 15px;">üìö Purpose</h3>
                <ul style="list-style: none; padding-left: 0;">
                    <li style="padding: 8px 0; padding-left: 25px; position: relative;">
                        <span style="position: absolute; left: 0; color: #667eea;">‚úì</span>
                        Align home support with Grade 1 classroom expectations and current instruction
                    </li>
                    <li style="padding: 8px 0; padding-left: 25px; position: relative;">
                        <span style="position: absolute; left: 0; color: #667eea;">‚úì</span>
                        Close transition gaps efficiently (especially English phonics automaticity and math fact fluency)
                    </li>
                    <li style="padding: 8px 0; padding-left: 25px; position: relative;">
                        <span style="position: absolute; left: 0; color: #667eea;">‚úì</span>
                        Support Pera emotionally by keeping work short, consistent, and confidence-building
                    </li>
                </ul>
            </div>

            <div class="info-grid">
                <div class="info-card">
                    <h3>üè´ School (Classroom Teacher)</h3>
                    <ul>
                        <li>Provides primary instruction</li>
                        <li>Monitors progress in class</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3>üë©‚Äçüè´ Ms. Boothby (2x/week)</h3>
                    <ul>
                        <li>Explicit teaching of weekly targets</li>
                        <li>Technique correction</li>
                        <li>45-60 min sessions</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3>üè† Home Support (Daily)</h3>
                    <ul>
                        <li>Build automaticity</li>
                        <li>Short daily practice (25-35 min)</li>
                        <li>Calm, predictable routine</li>
                    </ul>
                </div>
            </div>

            <div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin-top: 20px; border-left: 4px solid #ffc107;">
                <h3 style="color: #856404; margin-bottom: 10px;">‚ö° Key Principle</h3>
                <p style="color: #856404; font-weight: 500;">Short and consistent. Stop while she still feels successful!</p>
            </div>

            <!-- Resources Section -->
            <div style="background: white; padding: 25px; border-radius: 12px; margin-top: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <h3 style="color: #667eea; margin-bottom: 20px; font-size: 1.3em;">üìö Learning Resources</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">

                    <div style="background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); padding: 20px; border-radius: 10px; border-left: 4px solid #4caf50;">
                        <h4 style="color: #2e7d32; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                            üìñ Reading
                        </h4>
                        <p style="font-size: 1.2em; font-weight: bold; color: #1b5e20; margin-bottom: 8px;">Raz-Plus</p>
                        <p style="color: #388e3c; font-size: 0.9em;">Leveled reading program with guided books, quizzes, and progress tracking. Perfect for building reading fluency at Pera's level.</p>
                    </div>

                    <div style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); padding: 20px; border-radius: 10px; border-left: 4px solid #ff9800;">
                        <h4 style="color: #e65100; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                            üî¢ Math Fluency
                        </h4>
                        <p style="font-size: 1.2em; font-weight: bold; color: #bf360c; margin-bottom: 8px;">Reflex Math</p>
                        <p style="color: #f57c00; font-size: 0.9em;">Adaptive math fact practice. Builds automaticity with addition and subtraction facts through engaging games.</p>
                    </div>

                    <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); padding: 20px; border-radius: 10px; border-left: 4px solid #2196f3;">
                        <h4 style="color: #1565c0; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                            üî§ Phonics / Word Study
                        </h4>
                        <p style="font-size: 1.2em; font-weight: bold; color: #0d47a1; margin-bottom: 8px;">Reading Eggs</p>
                        <p style="color: #1976d2; font-size: 0.9em;">Fun, interactive phonics lessons with games and rewards. Covers CVC words, blends, digraphs, and sight words systematically.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="content">
            <!-- Week 1-2 -->
            <div class="week-section" data-week="1">
                <div class="week-header" onclick="toggleWeek(this)">
                    <h2>üìò Weeks 1-2: Stabilize Foundations</h2>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="week-content">
                    <div class="focus-area">
                        <h3>üìñ ELA / Reading</h3>
                        <div class="focus-items">
                            <div class="focus-item">üî§ Short vowels + CVC blending</div>
                            <div class="focus-item">üëÄ High-frequency (sight) words routine</div>
                            <div class="focus-item">‚úçÔ∏è Writing: complete sentences (capital letter + punctuation)</div>
                        </div>
                    </div>

                    <div class="focus-area">
                        <h3>üî¢ Math</h3>
                        <div class="focus-items">
                            <div class="focus-item">üìä Counting & number sense</div>
                            <div class="focus-item">üî¢ Number recognition and writing numbers</div>
                            <div class="focus-item">‚ûï Addition and subtraction (within 10 ‚Üí bridge to within 20)</div>
                        </div>
                    </div>

                    <div class="daily-routine">
                        <h3>üè† Daily Home Routine (Mon-Fri, 25-35 minutes)</h3>
                        <p><strong>A) Phonics/Word Study (8-10 min):</strong> Sound review (1 min) ‚Üí Blending practice (4 min) ‚Üí Dictation (3-5 min)</p>
                        <p><strong>B) Reading with Raz-Plus (10-12 min):</strong> Listen once (if needed) ‚Üí Read twice ‚Üí Answer 3 questions</p>
                        <p><strong>C) Math Fluency (7-10 min):</strong> Reflex Math (5-10 min) + strategy support if needed</p>
                    </div>

                    <div class="tracker-section">
                        <h3>üìÖ Weekly Tracker - Week 1 (Dates: _________)</h3>
                        
                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <h4 style="margin-bottom: 10px; color: #667eea;">This Week's Focus:</h4>
                            <input type="text" id="w1-focus1" placeholder="Phonics focus..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w1-focus2" placeholder="Sight words..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w1-focus3" placeholder="Reading goal (Raz level/book)..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w1-focus4" placeholder="Math goal..." style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                        </div>

                        <h4 style="margin-bottom: 15px; color: #117a8b;">Home Routine Completed:</h4>
                        <div class="day-checks">
                            <div class="day-check">
                                <input type="checkbox" id="w1-mon">
                                <label for="w1-mon">Monday</label>
                                <button class="comment-btn" id="cb-w1-mon" onclick="openComment('w1-mon', 'Monday')">üí¨</button>
                            </div>
                            <div class="day-check">
                                <input type="checkbox" id="w1-tue">
                                <label for="w1-tue">Tuesday</label>
                                <button class="comment-btn" id="cb-w1-tue" onclick="openComment('w1-tue', 'Tuesday')">üí¨</button>
                            </div>
                            <div class="day-check">
                                <input type="checkbox" id="w1-wed">
                                <label for="w1-wed">Wednesday</label>
                                <button class="comment-btn" id="cb-w1-wed" onclick="openComment('w1-wed', 'Wednesday')">üí¨</button>
                            </div>
                            <div class="day-check">
                                <input type="checkbox" id="w1-thu">
                                <label for="w1-thu">Thursday</label>
                                <button class="comment-btn" id="cb-w1-thu" onclick="openComment('w1-thu', 'Thursday')">üí¨</button>
                            </div>
                            <div class="day-check">
                                <input type="checkbox" id="w1-fri">
                                <label for="w1-fri">Friday</label>
                                <button class="comment-btn" id="cb-w1-fri" onclick="openComment('w1-fri', 'Friday')">üí¨</button>
                            </div>
                        </div>

                        <div class="week-progress-container" id="week1-progress">
                            <span>üìà Week Progress:</span>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" id="week1-progress-bar" style="width: 0%"></div>
                            </div>
                            <span class="week-progress-text" id="week1-progress-text">0%</span>
                        </div>
                        <div class="last-edited" id="week1-last-edited">No edits yet</div>

                        <h4 style="margin-bottom: 15px; margin-top: 25px; color: #117a8b;">Friday Progress Check:</h4>
                        <div class="progress-checks">
                            <div class="progress-item">
                                <label>ELA Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w1-ela')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w1-ela')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w1-ela')">‚ùå Needs Support</button>
                                </div>
                            </div>
                            <div class="progress-item">
                                <label>Math Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w1-math')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w1-math')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w1-math')">‚ùå Needs Support</button>
                                </div>
                            </div>
                        </div>

                        <div class="notes-area">
                            <label>üìù Notes / Adjustments for Next Week:</label>
                            <textarea id="w1-notes" placeholder="Enter your observations, concerns, or adjustments needed..."></textarea>
                        </div>

                        <button class="save-btn" onclick="saveWeekData(1)">üíæ Save Week 1 Progress</button>
                    </div>

                    <!-- Week 2 Tracker -->
                    <div class="tracker-section" style="margin-top: 40px; border-left-color: #20c997;">
                        <h3>üìÖ Weekly Tracker - Week 2 (Dates: _________)</h3>

                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <h4 style="margin-bottom: 10px; color: #667eea;">This Week's Focus:</h4>
                            <input type="text" id="w2-focus1" placeholder="Phonics focus..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w2-focus2" placeholder="Sight words..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w2-focus3" placeholder="Reading goal (Raz level/book)..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w2-focus4" placeholder="Math goal..." style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                        </div>

                        <h4 style="margin-bottom: 15px; color: #117a8b;">Home Routine Completed:</h4>
                        <div class="day-checks">
                            <div class="day-check">
                                <input type="checkbox" id="w2-mon">
                                <label for="w2-mon">Monday</label>
                                <button class="comment-btn" id="cb-w2-mon" onclick="openComment('w2-mon', 'Monday')">üí¨</button>
                            </div>
                            <div class="day-check">
                                <input type="checkbox" id="w2-tue">
                                <label for="w2-tue">Tuesday</label>
                                <button class="comment-btn" id="cb-w2-tue" onclick="openComment('w2-tue', 'Tuesday')">üí¨</button>
                            </div>
                            <div class="day-check">
                                <input type="checkbox" id="w2-wed">
                                <label for="w2-wed">Wednesday</label>
                                <button class="comment-btn" id="cb-w2-wed" onclick="openComment('w2-wed', 'Wednesday')">üí¨</button>
                            </div>
                            <div class="day-check">
                                <input type="checkbox" id="w2-thu">
                                <label for="w2-thu">Thursday</label>
                                <button class="comment-btn" id="cb-w2-thu" onclick="openComment('w2-thu', 'Thursday')">üí¨</button>
                            </div>
                            <div class="day-check">
                                <input type="checkbox" id="w2-fri">
                                <label for="w2-fri">Friday</label>
                                <button class="comment-btn" id="cb-w2-fri" onclick="openComment('w2-fri', 'Friday')">üí¨</button>
                            </div>
                        </div>

                        <div class="week-progress-container" id="week2-progress">
                            <span>üìà Week Progress:</span>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" id="week2-progress-bar" style="width: 0%"></div>
                            </div>
                            <span class="week-progress-text" id="week2-progress-text">0%</span>
                        </div>
                        <div class="last-edited" id="week2-last-edited">No edits yet</div>

                        <h4 style="margin-bottom: 15px; margin-top: 25px; color: #117a8b;">Friday Progress Check:</h4>
                        <div class="progress-checks">
                            <div class="progress-item">
                                <label>ELA Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w2-ela')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w2-ela')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w2-ela')">‚ùå Needs Support</button>
                                </div>
                            </div>
                            <div class="progress-item">
                                <label>Math Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w2-math')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w2-math')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w2-math')">‚ùå Needs Support</button>
                                </div>
                            </div>
                        </div>

                        <div class="notes-area">
                            <label>üìù Notes / Adjustments for Next Week:</label>
                            <textarea id="w2-notes" placeholder="Enter your observations, concerns, or adjustments needed..."></textarea>
                        </div>

                        <button class="save-btn" onclick="saveWeekData(2)">üíæ Save Week 2 Progress</button>
                    </div>
                </div>
            </div>

            <!-- Week 3-4 -->
            <div class="week-section collapsed" data-week="2">
                <div class="week-header" onclick="toggleWeek(this)">
                    <h2>üìó Weeks 3-4: Blends + Digraphs (High Classroom Payoff)</h2>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="week-content">
                    <div class="focus-area">
                        <h3>üìñ ELA / Reading</h3>
                        <div class="focus-items">
                            <div class="focus-item">üî§ Blending CCVC and CVCC words (consonant blends)</div>
                            <div class="focus-item">üìù Digraphs/trigraphs (sh, ch, th, wh, ph...)</div>
                            <div class="focus-item">üéØ Fluency: repeated reading for smoother blending</div>
                        </div>
                    </div>

                    <div class="focus-area">
                        <h3>üî¢ Math</h3>
                        <div class="focus-items">
                            <div class="focus-item">‚öñÔ∏è Compare numbers (greater than, less than, equal to)</div>
                            <div class="focus-item">üïê Introduction to time (analog + digital)</div>
                            <div class="focus-item">üìä Basic word problems (visual + simple equations)</div>
                        </div>
                    </div>

                    <div class="tracker-section">
                        <h3>üìÖ Weekly Tracker - Week 3 (Dates: _________)</h3>

                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <h4 style="margin-bottom: 10px; color: #667eea;">This Week's Focus:</h4>
                            <input type="text" id="w3-focus1" placeholder="Phonics focus..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w3-focus2" placeholder="Sight words..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w3-focus3" placeholder="Reading goal..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w3-focus4" placeholder="Math goal..." style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                        </div>

                        <h4 style="margin-bottom: 15px; color: #117a8b;">Home Routine Completed:</h4>
                        <div class="day-checks">
                            <div class="day-check"><input type="checkbox" id="w3-mon"><label for="w3-mon">Monday</label><button class="comment-btn" id="cb-w3-mon" onclick="openComment('w3-mon', 'Monday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w3-tue"><label for="w3-tue">Tuesday</label><button class="comment-btn" id="cb-w3-tue" onclick="openComment('w3-tue', 'Tuesday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w3-wed"><label for="w3-wed">Wednesday</label><button class="comment-btn" id="cb-w3-wed" onclick="openComment('w3-wed', 'Wednesday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w3-thu"><label for="w3-thu">Thursday</label><button class="comment-btn" id="cb-w3-thu" onclick="openComment('w3-thu', 'Thursday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w3-fri"><label for="w3-fri">Friday</label><button class="comment-btn" id="cb-w3-fri" onclick="openComment('w3-fri', 'Friday')">üí¨</button></div>
                        </div>

                        <div class="week-progress-container">
                            <span>üìà Week Progress:</span>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" id="week3-progress-bar" style="width: 0%"></div>
                            </div>
                            <span class="week-progress-text" id="week3-progress-text">0%</span>
                        </div>
                        <div class="last-edited" id="week3-last-edited">No edits yet</div>

                        <h4 style="margin-bottom: 15px; margin-top: 25px; color: #117a8b;">Friday Progress Check:</h4>
                        <div class="progress-checks">
                            <div class="progress-item">
                                <label>ELA Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w3-ela')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w3-ela')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w3-ela')">‚ùå Needs Support</button>
                                </div>
                            </div>
                            <div class="progress-item">
                                <label>Math Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w3-math')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w3-math')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w3-math')">‚ùå Needs Support</button>
                                </div>
                            </div>
                        </div>

                        <div class="notes-area">
                            <label>üìù Notes / Adjustments for Next Week:</label>
                            <textarea id="w3-notes" placeholder="Enter your observations..."></textarea>
                        </div>

                        <button class="save-btn" onclick="saveWeekData(3)">üíæ Save Week 3 Progress</button>
                    </div>

                    <!-- Week 4 Tracker -->
                    <div class="tracker-section" style="margin-top: 40px; border-left-color: #20c997;">
                        <h3>üìÖ Weekly Tracker - Week 4 (Dates: _________)</h3>

                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <h4 style="margin-bottom: 10px; color: #667eea;">This Week's Focus:</h4>
                            <input type="text" id="w4-focus1" placeholder="Phonics focus..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w4-focus2" placeholder="Sight words..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w4-focus3" placeholder="Reading goal..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w4-focus4" placeholder="Math goal..." style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                        </div>

                        <h4 style="margin-bottom: 15px; color: #117a8b;">Home Routine Completed:</h4>
                        <div class="day-checks">
                            <div class="day-check"><input type="checkbox" id="w4-mon"><label for="w4-mon">Monday</label><button class="comment-btn" id="cb-w4-mon" onclick="openComment('w4-mon', 'Monday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w4-tue"><label for="w4-tue">Tuesday</label><button class="comment-btn" id="cb-w4-tue" onclick="openComment('w4-tue', 'Tuesday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w4-wed"><label for="w4-wed">Wednesday</label><button class="comment-btn" id="cb-w4-wed" onclick="openComment('w4-wed', 'Wednesday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w4-thu"><label for="w4-thu">Thursday</label><button class="comment-btn" id="cb-w4-thu" onclick="openComment('w4-thu', 'Thursday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w4-fri"><label for="w4-fri">Friday</label><button class="comment-btn" id="cb-w4-fri" onclick="openComment('w4-fri', 'Friday')">üí¨</button></div>
                        </div>

                        <div class="week-progress-container">
                            <span>üìà Week Progress:</span>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" id="week4-progress-bar" style="width: 0%"></div>
                            </div>
                            <span class="week-progress-text" id="week4-progress-text">0%</span>
                        </div>
                        <div class="last-edited" id="week4-last-edited">No edits yet</div>

                        <h4 style="margin-bottom: 15px; margin-top: 25px; color: #117a8b;">Friday Progress Check:</h4>
                        <div class="progress-checks">
                            <div class="progress-item">
                                <label>ELA Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w4-ela')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w4-ela')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w4-ela')">‚ùå Needs Support</button>
                                </div>
                            </div>
                            <div class="progress-item">
                                <label>Math Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w4-math')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w4-math')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w4-math')">‚ùå Needs Support</button>
                                </div>
                            </div>
                        </div>

                        <div class="notes-area">
                            <label>üìù Notes / Adjustments for Next Week:</label>
                            <textarea id="w4-notes" placeholder="Enter your observations..."></textarea>
                        </div>

                        <button class="save-btn" onclick="saveWeekData(4)">üíæ Save Week 4 Progress</button>
                    </div>
                </div>
            </div>

            <!-- Week 5-6 -->
            <div class="week-section collapsed" data-week="3">
                <div class="week-header" onclick="toggleWeek(this)">
                    <h2>üìô Weeks 5-6: Silent-e + Vowel Teams</h2>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="week-content">
                    <div class="focus-area">
                        <h3>üìñ ELA / Reading</h3>
                        <div class="focus-items">
                            <div class="focus-item">üî§ Silent-e (CVCe patterns: make, bike...)</div>
                            <div class="focus-item">üë• Introduction to vowel teams (ai, ee, oa, ea...)</div>
                        </div>
                    </div>

                    <div class="focus-area">
                        <h3>üî¢ Math</h3>
                        <div class="focus-items">
                            <div class="focus-item">üìè Measurement (inches)</div>
                            <div class="focus-item">üî∑ Shapes (vertices and sides)</div>
                            <div class="focus-item">üçï Simple fractions (halves and fourths)</div>
                        </div>
                    </div>

                    <div class="tracker-section">
                        <h3>üìÖ Weekly Tracker - Week 5 (Dates: _________)</h3>

                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <h4 style="margin-bottom: 10px; color: #667eea;">This Week's Focus:</h4>
                            <input type="text" id="w5-focus1" placeholder="Phonics focus..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w5-focus2" placeholder="Sight words..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w5-focus3" placeholder="Reading goal..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w5-focus4" placeholder="Math goal..." style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                        </div>

                        <h4 style="margin-bottom: 15px; color: #117a8b;">Home Routine Completed:</h4>
                        <div class="day-checks">
                            <div class="day-check"><input type="checkbox" id="w5-mon"><label for="w5-mon">Monday</label><button class="comment-btn" id="cb-w5-mon" onclick="openComment('w5-mon', 'Monday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w5-tue"><label for="w5-tue">Tuesday</label><button class="comment-btn" id="cb-w5-tue" onclick="openComment('w5-tue', 'Tuesday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w5-wed"><label for="w5-wed">Wednesday</label><button class="comment-btn" id="cb-w5-wed" onclick="openComment('w5-wed', 'Wednesday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w5-thu"><label for="w5-thu">Thursday</label><button class="comment-btn" id="cb-w5-thu" onclick="openComment('w5-thu', 'Thursday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w5-fri"><label for="w5-fri">Friday</label><button class="comment-btn" id="cb-w5-fri" onclick="openComment('w5-fri', 'Friday')">üí¨</button></div>
                        </div>

                        <div class="week-progress-container">
                            <span>üìà Week Progress:</span>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" id="week5-progress-bar" style="width: 0%"></div>
                            </div>
                            <span class="week-progress-text" id="week5-progress-text">0%</span>
                        </div>
                        <div class="last-edited" id="week5-last-edited">No edits yet</div>

                        <h4 style="margin-bottom: 15px; margin-top: 25px; color: #117a8b;">Friday Progress Check:</h4>
                        <div class="progress-checks">
                            <div class="progress-item">
                                <label>ELA Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w5-ela')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w5-ela')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w5-ela')">‚ùå Needs Support</button>
                                </div>
                            </div>
                            <div class="progress-item">
                                <label>Math Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w5-math')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w5-math')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w5-math')">‚ùå Needs Support</button>
                                </div>
                            </div>
                        </div>

                        <div class="notes-area">
                            <label>üìù Notes / Adjustments for Next Week:</label>
                            <textarea id="w5-notes" placeholder="Enter your observations..."></textarea>
                        </div>

                        <button class="save-btn" onclick="saveWeekData(5)">üíæ Save Week 5 Progress</button>
                    </div>

                    <!-- Week 6 Tracker -->
                    <div class="tracker-section" style="margin-top: 40px; border-left-color: #20c997;">
                        <h3>üìÖ Weekly Tracker - Week 6 (Dates: _________)</h3>

                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <h4 style="margin-bottom: 10px; color: #667eea;">This Week's Focus:</h4>
                            <input type="text" id="w6-focus1" placeholder="Phonics focus..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w6-focus2" placeholder="Sight words..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w6-focus3" placeholder="Reading goal..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w6-focus4" placeholder="Math goal..." style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                        </div>

                        <h4 style="margin-bottom: 15px; color: #117a8b;">Home Routine Completed:</h4>
                        <div class="day-checks">
                            <div class="day-check"><input type="checkbox" id="w6-mon"><label for="w6-mon">Monday</label><button class="comment-btn" id="cb-w6-mon" onclick="openComment('w6-mon', 'Monday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w6-tue"><label for="w6-tue">Tuesday</label><button class="comment-btn" id="cb-w6-tue" onclick="openComment('w6-tue', 'Tuesday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w6-wed"><label for="w6-wed">Wednesday</label><button class="comment-btn" id="cb-w6-wed" onclick="openComment('w6-wed', 'Wednesday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w6-thu"><label for="w6-thu">Thursday</label><button class="comment-btn" id="cb-w6-thu" onclick="openComment('w6-thu', 'Thursday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w6-fri"><label for="w6-fri">Friday</label><button class="comment-btn" id="cb-w6-fri" onclick="openComment('w6-fri', 'Friday')">üí¨</button></div>
                        </div>

                        <div class="week-progress-container">
                            <span>üìà Week Progress:</span>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" id="week6-progress-bar" style="width: 0%"></div>
                            </div>
                            <span class="week-progress-text" id="week6-progress-text">0%</span>
                        </div>
                        <div class="last-edited" id="week6-last-edited">No edits yet</div>

                        <h4 style="margin-bottom: 15px; margin-top: 25px; color: #117a8b;">Friday Progress Check:</h4>
                        <div class="progress-checks">
                            <div class="progress-item">
                                <label>ELA Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w6-ela')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w6-ela')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w6-ela')">‚ùå Needs Support</button>
                                </div>
                            </div>
                            <div class="progress-item">
                                <label>Math Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w6-math')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w6-math')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w6-math')">‚ùå Needs Support</button>
                                </div>
                            </div>
                        </div>

                        <div class="notes-area">
                            <label>üìù Notes / Adjustments for Next Week:</label>
                            <textarea id="w6-notes" placeholder="Enter your observations..."></textarea>
                        </div>

                        <button class="save-btn" onclick="saveWeekData(6)">üíæ Save Week 6 Progress</button>
                    </div>
                </div>
            </div>

            <!-- Week 7-8 -->
            <div class="week-section collapsed" data-week="4">
                <div class="week-header" onclick="toggleWeek(this)">
                    <h2>üìï Weeks 7-8: Integration + Targeted Repair</h2>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="week-content">
                    <div class="focus-area">
                        <h3>üìñ ELA / Reading</h3>
                        <div class="focus-items">
                            <div class="focus-item">üîÑ Mixed review of all phonics patterns (short daily review)</div>
                            <div class="focus-item">üìù Paragraph writing: topic + details</div>
                            <div class="focus-item">üéØ Fluency and comprehension support through repeated reading</div>
                        </div>
                    </div>

                    <div class="focus-area">
                        <h3>üî¢ Math</h3>
                        <div class="focus-items">
                            <div class="focus-item">üîÑ Mixed review + additional word problems</div>
                            <div class="focus-item">üéØ Extra focus on the weakest Reflex Math area (based on results)</div>
                        </div>
                    </div>

                    <div class="tracker-section">
                        <h3>üìÖ Weekly Tracker - Week 7 (Dates: _________)</h3>

                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <h4 style="margin-bottom: 10px; color: #667eea;">This Week's Focus:</h4>
                            <input type="text" id="w7-focus1" placeholder="Phonics focus..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w7-focus2" placeholder="Sight words..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w7-focus3" placeholder="Reading goal..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w7-focus4" placeholder="Math goal..." style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                        </div>

                        <h4 style="margin-bottom: 15px; color: #117a8b;">Home Routine Completed:</h4>
                        <div class="day-checks">
                            <div class="day-check"><input type="checkbox" id="w7-mon"><label for="w7-mon">Monday</label><button class="comment-btn" id="cb-w7-mon" onclick="openComment('w7-mon', 'Monday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w7-tue"><label for="w7-tue">Tuesday</label><button class="comment-btn" id="cb-w7-tue" onclick="openComment('w7-tue', 'Tuesday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w7-wed"><label for="w7-wed">Wednesday</label><button class="comment-btn" id="cb-w7-wed" onclick="openComment('w7-wed', 'Wednesday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w7-thu"><label for="w7-thu">Thursday</label><button class="comment-btn" id="cb-w7-thu" onclick="openComment('w7-thu', 'Thursday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w7-fri"><label for="w7-fri">Friday</label><button class="comment-btn" id="cb-w7-fri" onclick="openComment('w7-fri', 'Friday')">üí¨</button></div>
                        </div>

                        <div class="week-progress-container">
                            <span>üìà Week Progress:</span>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" id="week7-progress-bar" style="width: 0%"></div>
                            </div>
                            <span class="week-progress-text" id="week7-progress-text">0%</span>
                        </div>
                        <div class="last-edited" id="week7-last-edited">No edits yet</div>

                        <h4 style="margin-bottom: 15px; margin-top: 25px; color: #117a8b;">Friday Progress Check:</h4>
                        <div class="progress-checks">
                            <div class="progress-item">
                                <label>ELA Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w7-ela')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w7-ela')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w7-ela')">‚ùå Needs Support</button>
                                </div>
                            </div>
                            <div class="progress-item">
                                <label>Math Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w7-math')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w7-math')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w7-math')">‚ùå Needs Support</button>
                                </div>
                            </div>
                        </div>

                        <div class="notes-area">
                            <label>üìù Notes / Adjustments for Next Week:</label>
                            <textarea id="w7-notes" placeholder="Enter your observations..."></textarea>
                        </div>

                        <button class="save-btn" onclick="saveWeekData(7)">üíæ Save Week 7 Progress</button>
                    </div>

                    <!-- Week 8 Tracker -->
                    <div class="tracker-section" style="margin-top: 40px; border-left-color: #20c997;">
                        <h3>üìÖ Weekly Tracker - Week 8 (Dates: _________)</h3>

                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <h4 style="margin-bottom: 10px; color: #667eea;">This Week's Focus:</h4>
                            <input type="text" id="w8-focus1" placeholder="Phonics focus..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w8-focus2" placeholder="Sight words..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w8-focus3" placeholder="Reading goal..." style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                            <input type="text" id="w8-focus4" placeholder="Math goal..." style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                        </div>

                        <h4 style="margin-bottom: 15px; color: #117a8b;">Home Routine Completed:</h4>
                        <div class="day-checks">
                            <div class="day-check"><input type="checkbox" id="w8-mon"><label for="w8-mon">Monday</label><button class="comment-btn" id="cb-w8-mon" onclick="openComment('w8-mon', 'Monday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w8-tue"><label for="w8-tue">Tuesday</label><button class="comment-btn" id="cb-w8-tue" onclick="openComment('w8-tue', 'Tuesday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w8-wed"><label for="w8-wed">Wednesday</label><button class="comment-btn" id="cb-w8-wed" onclick="openComment('w8-wed', 'Wednesday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w8-thu"><label for="w8-thu">Thursday</label><button class="comment-btn" id="cb-w8-thu" onclick="openComment('w8-thu', 'Thursday')">üí¨</button></div>
                            <div class="day-check"><input type="checkbox" id="w8-fri"><label for="w8-fri">Friday</label><button class="comment-btn" id="cb-w8-fri" onclick="openComment('w8-fri', 'Friday')">üí¨</button></div>
                        </div>

                        <div class="week-progress-container">
                            <span>üìà Week Progress:</span>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" id="week8-progress-bar" style="width: 0%"></div>
                            </div>
                            <span class="week-progress-text" id="week8-progress-text">0%</span>
                        </div>
                        <div class="last-edited" id="week8-last-edited">No edits yet</div>

                        <h4 style="margin-bottom: 15px; margin-top: 25px; color: #117a8b;">Friday Progress Check:</h4>
                        <div class="progress-checks">
                            <div class="progress-item">
                                <label>ELA Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w8-ela')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w8-ela')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w8-ela')">‚ùå Needs Support</button>
                                </div>
                            </div>
                            <div class="progress-item">
                                <label>Math Result:</label>
                                <div class="status-buttons">
                                    <button class="status-btn mastered" onclick="setStatus(this, 'w8-math')">‚úÖ Mastered</button>
                                    <button class="status-btn developing" onclick="setStatus(this, 'w8-math')">üü° Developing</button>
                                    <button class="status-btn needs-support" onclick="setStatus(this, 'w8-math')">‚ùå Needs Support</button>
                                </div>
                            </div>
                        </div>

                        <div class="notes-area">
                            <label>üìù Notes / Adjustments:</label>
                            <textarea id="w8-notes" placeholder="Final observations and recommendations..."></textarea>
                        </div>

                        <button class="save-btn" onclick="saveWeekData(8)">üíæ Save Week 8 Progress</button>
                    </div>
                </div>
            </div>

            <!-- Export Section -->
            <div class="export-section">
                <h2 style="color: #667eea; margin-bottom: 20px;">üì§ Export & Share</h2>
                <p style="margin-bottom: 20px; color: #666;">Save your progress and share with teachers</p>
                <button class="export-btn" onclick="exportData()">üíæ Download All Data (JSON)</button>
                <button class="export-btn" onclick="window.print()">üñ®Ô∏è Print Plan</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDL-Pg0MJ_sDorFefIlyUwyeqZU1grQMH0",
            authDomain: "pera-support.firebaseapp.com",
            projectId: "pera-support",
            storageBucket: "pera-support.firebasestorage.app",
            messagingSenderId: "970307738932",
            appId: "1:970307738932:web:7f0aa87178389b13c65961"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Connection status indicator
        let isOnline = true;
        let currentCommentDay = null;

        // Get current user from localStorage
        function getCurrentUser() {
            return localStorage.getItem('peraUser') || '';
        }

        // Save current user to localStorage
        function saveCurrentUser() {
            const user = document.getElementById('currentUser').value;
            localStorage.setItem('peraUser', user);
            if (user) {
                showNotification(`üëã Welcome, ${user}!`, 'success');
            }
        }

        // Load user on page load
        function loadCurrentUser() {
            const savedUser = getCurrentUser();
            if (savedUser) {
                document.getElementById('currentUser').value = savedUser;
            }
        }

        // Check if user is selected before saving
        function requireUser() {
            const user = getCurrentUser();
            if (!user) {
                showNotification('‚ö†Ô∏è Please select your name first!', 'error');
                document.getElementById('currentUser').focus();
                document.getElementById('currentUser').style.outline = '3px solid #dc3545';
                setTimeout(() => {
                    document.getElementById('currentUser').style.outline = '';
                }, 2000);
                return false;
            }
            return true;
        }

        // Toggle week sections
        function toggleWeek(header) {
            const section = header.parentElement;
            section.classList.toggle('collapsed');
        }

        // Toggle Help Panel
        function toggleHelp() {
            const panel = document.getElementById('helpPanel');
            const overlay = document.getElementById('helpOverlay');
            panel.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        // Comment Modal Functions
        function openComment(dayId, dayLabel) {
            currentCommentDay = dayId;
            document.getElementById('commentDayLabel').textContent = dayLabel;
            document.getElementById('commentModal').classList.add('active');

            // Load existing comment
            const weekNum = dayId.match(/w(\d+)-/)[1];
            db.collection('weeks').doc(`week${weekNum}`).get().then(doc => {
                if (doc.exists && doc.data().dayComments && doc.data().dayComments[dayId]) {
                    document.getElementById('commentText').value = doc.data().dayComments[dayId];
                } else {
                    document.getElementById('commentText').value = '';
                }
            });
        }

        function closeCommentModal() {
            document.getElementById('commentModal').classList.remove('active');
            currentCommentDay = null;
        }

        function saveComment() {
            if (!requireUser()) return;

            const comment = document.getElementById('commentText').value;
            const weekNum = currentCommentDay.match(/w(\d+)-/)[1];
            const user = getCurrentUser();

            db.collection('weeks').doc(`week${weekNum}`).set({
                dayComments: { [currentCommentDay]: comment },
                lastEditedBy: user,
                lastEditedAt: firebase.firestore.FieldValue.serverTimestamp()
            }, { merge: true }).then(() => {
                showNotification('üí¨ Comment saved!', 'success');
                closeCommentModal();
                updateCommentButtons();
            });
        }

        // Update comment button styles
        function updateCommentButtons() {
            // First reset all buttons
            document.querySelectorAll('.comment-btn').forEach(btn => {
                btn.classList.remove('has-comment');
                btn.textContent = 'üí¨';
            });

            [1, 2, 3, 4, 5, 6, 7, 8].forEach(weekNum => {
                db.collection('weeks').doc(`week${weekNum}`).get().then(doc => {
                    if (doc.exists && doc.data().dayComments) {
                        Object.keys(doc.data().dayComments).forEach(dayId => {
                            const btn = document.getElementById(`cb-${dayId}`);
                            if (btn && doc.data().dayComments[dayId]) {
                                btn.classList.add('has-comment');
                                btn.textContent = 'üìù'; // Change icon when has comment
                            }
                        });
                    }
                });
            });
        }

        // Calculate and update progress bars
        function updateProgressBars() {
            let totalChecked = 0;
            let totalCheckboxes = 0;

            [1, 2, 3, 4, 5, 6, 7, 8].forEach(weekNum => {
                const checkboxes = document.querySelectorAll(`input[id^="w${weekNum}-"]:checked`);
                const allCheckboxes = document.querySelectorAll(`input[id^="w${weekNum}-"][type="checkbox"]`);

                const checked = checkboxes.length;
                const total = allCheckboxes.length;
                const percent = total > 0 ? Math.round((checked / total) * 100) : 0;

                // Update week progress bar
                const progressBar = document.getElementById(`week${weekNum}-progress-bar`);
                const progressText = document.getElementById(`week${weekNum}-progress-text`);
                if (progressBar) progressBar.style.width = `${percent}%`;
                if (progressText) progressText.textContent = `${percent}%`;

                totalChecked += checked;
                totalCheckboxes += total;
            });

            // Update overall progress
            const overallPercent = totalCheckboxes > 0 ? Math.round((totalChecked / totalCheckboxes) * 100) : 0;
            document.getElementById('overallPercent').textContent = `${overallPercent}%`;
            document.getElementById('overallProgressBar').style.width = `${overallPercent}%`;
        }

        // Format time ago
        function timeAgo(timestamp) {
            if (!timestamp) return 'No edits yet';
            const now = new Date();
            const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);
            const seconds = Math.floor((now - date) / 1000);

            if (seconds < 60) return 'just now';
            if (seconds < 3600) return `${Math.floor(seconds/60)} min ago`;
            if (seconds < 86400) return `${Math.floor(seconds/3600)} hours ago`;
            return `${Math.floor(seconds/86400)} days ago`;
        }

        // Update last edited info
        function updateLastEdited(weekNum, data) {
            const el = document.getElementById(`week${weekNum}-last-edited`);
            if (el && data.lastEditedBy) {
                el.textContent = `Last edited by ${data.lastEditedBy}, ${timeAgo(data.lastEditedAt)}`;
            }
        }

        // Show notification
        function showNotification(message, type) {
            const existing = document.querySelector('.notification');
            if (existing) existing.remove();

            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#17a2b8'};
                color: white;
                border-radius: 8px;
                font-weight: bold;
                z-index: 9999;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }

        // Set status for progress items
        function setStatus(button, groupName) {
            if (!requireUser()) return;

            const buttons = button.parentElement.querySelectorAll('.status-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');

            // Save to Firebase
            const status = button.textContent.includes('Mastered') ? 'mastered' :
                          button.textContent.includes('Developing') ? 'developing' : 'needs-support';

            db.collection('progress').doc('statuses').set({
                [groupName]: status,
                lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
            }, { merge: true })
            .then(() => showNotification('‚úÖ Status saved!', 'success'))
            .catch(err => showNotification('‚ùå Error saving', 'error'));
        }

        // Save week data
        function saveWeekData(weekNum) {
            if (!requireUser()) return;

            const user = getCurrentUser();
            const weekData = {
                week: weekNum,
                timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                lastEditedBy: user,
                lastEditedAt: firebase.firestore.FieldValue.serverTimestamp(),
                completed: {}
            };

            // Save checkboxes
            const checkboxes = document.querySelectorAll(`input[id^="w${weekNum}-"]:not([type="text"])`);
            checkboxes.forEach(cb => {
                if (cb.type === 'checkbox') {
                    weekData.completed[cb.id] = cb.checked;
                }
            });

            // Save notes
            const notes = document.getElementById(`w${weekNum}-notes`);
            if (notes) {
                weekData.notes = notes.value;
            }

            // Save text inputs (focus areas) - each week has its own focus inputs
            weekData.focusAreas = {};
            for (let i = 1; i <= 4; i++) {
                const input = document.getElementById(`w${weekNum}-focus${i}`);
                if (input) {
                    weekData.focusAreas[`field${i-1}`] = input.value;
                }
            }

            // Save to Firebase
            db.collection('weeks').doc(`week${weekNum}`).set(weekData, { merge: true })
                .then(() => {
                    showNotification(`‚úÖ Week ${weekNum} saved!`, 'success');
                    updateProgressBars();
                })
                .catch(error => showNotification(`‚ùå Error: ${error.message}`, 'error'));
        }

        // Export all data
        async function exportData() {
            showNotification('üì• Preparing export...', 'info');

            const allData = {
                exportDate: new Date().toISOString(),
                weeks: [],
                statuses: {}
            };

            try {
                // Get weeks data
                const weeksSnapshot = await db.collection('weeks').get();
                weeksSnapshot.forEach(doc => {
                    allData.weeks.push({ id: doc.id, ...doc.data() });
                });

                // Get statuses
                const statusDoc = await db.collection('progress').doc('statuses').get();
                if (statusDoc.exists) {
                    allData.statuses = statusDoc.data();
                }

                // Create download
                const dataStr = JSON.stringify(allData, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `pera-progress-${new Date().toISOString().split('T')[0]}.json`;
                link.click();

                showNotification('‚úÖ Export complete!', 'success');
            } catch (error) {
                showNotification(`‚ùå Export failed: ${error.message}`, 'error');
            }
        }

        // Load data from Firebase and listen for real-time updates
        window.addEventListener('load', function() {
            showNotification('üîÑ Loading...', 'info');

            // Load saved user
            loadCurrentUser();

            // Listen for real-time updates on weeks
            db.collection('weeks').onSnapshot(snapshot => {
                snapshot.forEach(doc => {
                    const data = doc.data();
                    const weekNum = data.week;

                    // Restore checkboxes
                    if (data.completed) {
                        Object.entries(data.completed).forEach(([id, checked]) => {
                            const checkbox = document.getElementById(id);
                            if (checkbox) checkbox.checked = checked;
                        });
                    }

                    // Restore notes
                    const notes = document.getElementById(`w${weekNum}-notes`);
                    if (notes && data.notes !== undefined) {
                        notes.value = data.notes;
                    }

                    // Restore focus areas - each week has its own focus inputs
                    if (data.focusAreas) {
                        for (let i = 0; i < 4; i++) {
                            const input = document.getElementById(`w${weekNum}-focus${i+1}`);
                            if (input && data.focusAreas[`field${i}`]) {
                                input.value = data.focusAreas[`field${i}`];
                            }
                        }
                    }

                    // Update last edited info
                    updateLastEdited(weekNum, data);
                });

                // Update progress bars after data loads
                updateProgressBars();
                updateCommentButtons();
                showNotification('‚úÖ Saved!', 'success');
            }, error => {
                showNotification('‚ùå Connection error', 'error');
                console.error('Firestore error:', error);
            });

            // Listen for real-time updates on statuses
            db.collection('progress').doc('statuses').onSnapshot(doc => {
                if (doc.exists) {
                    const data = doc.data();
                    Object.entries(data).forEach(([key, status]) => {
                        if (key !== 'lastUpdated') {
                            const buttons = document.querySelectorAll(`button[onclick*="${key}"]`);
                            buttons.forEach(btn => {
                                btn.classList.remove('active');
                                if (btn.classList.contains(status)) {
                                    btn.classList.add('active');
                                }
                            });
                        }
                    });
                }
            });
        });

        // Auto-save everything immediately
        let autoSaveTimer;
        document.addEventListener('change', function(e) {
            // Auto-save checkboxes
            if (e.target.matches('input[type="checkbox"]')) {
                if (!requireUser()) {
                    e.target.checked = !e.target.checked; // Revert checkbox
                    return;
                }
                const weekMatch = e.target.id.match(/w(\d+)-/);
                if (weekMatch) {
                    const weekNum = weekMatch[1];
                    const user = getCurrentUser();
                    db.collection('weeks').doc(`week${weekNum}`).set({
                        week: parseInt(weekNum),
                        completed: { [e.target.id]: e.target.checked },
                        lastEditedBy: user,
                        lastEditedAt: firebase.firestore.FieldValue.serverTimestamp()
                    }, { merge: true });
                    updateProgressBars();
                    showNotification('‚úÖ Saved!', 'success');
                }
            }
        });

        // Auto-save text inputs and textareas with debounce
        document.addEventListener('input', function(e) {
            if (e.target.matches('input[type="text"], textarea')) {
                clearTimeout(autoSaveTimer);
                autoSaveTimer = setTimeout(() => {
                    if (!requireUser()) return;
                    // Find which week this belongs to by checking the element ID
                    const weekMatch = e.target.id.match(/w(\d+)-/);
                    if (weekMatch) {
                        saveWeekData(parseInt(weekMatch[1]));
                    }
                }, 1500); // Save 1.5 seconds after user stops typing
            }
        });
    </script>
</body>
</html>